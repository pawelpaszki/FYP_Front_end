<div class="row" style="padding-bottom: 1.5em; z-index: 1; padding-top:1.5em; position: fixed; top: 3.5em; width: 100%; background: white">
  <div class="col-md-4">
    <input type="text" placeholder="Search for containers" #imageName (keyup)="filterContainers(imageName.value)" style="width: 96%; margin-top: 0.15em;">
  </div>
  <div class="col-md-8"></div>
</div>
<div class="row" style="background: #424242; color: white; line-height: 3em; z-index: 2; position: fixed; top: 8em; width: 98%;">
  <div class="col-md-4">Image name <span (click)="sort()" class="glyphicon glyphicon-sort" aria-hidden=true></span></div>
  <div class="col-md-2">Name</div>
  <div class="col-md-1">ID</div>
  <div class="col-md-2">Status</div>
  <div class="col-md-3">Actions</div>
</div>
<div style="margin-top: 12em;">
  <div *ngFor="let containerCol of containerCollection" style="margin-bottom: 0.5em; margin-top: 0.5em;" [ngClass]="queriedContainers.indexOf(containerCol.imageName) !== -1 ? 'disabled' : ''">
    <div *ngIf="containerCol.imageName.includes(searchTerm)">
      <div class="row" style="margin-bottom: 0.3em; background: lightgray; line-height: 2.5em"
           (mouseenter)="mouseEnterImageNameDiv(containerCol.imageName)"  (mouseleave)="mouseLeaveImageNameDiv(containerCol.imageName)">
        <div class="col-md-4" style="margin-top: 0.2em;">{{containerCol.imageName}}</div>
        <div class="col-md-5">
        <span *ngIf="extractedSrcContainers.indexOf(containerCol.imageName) !== -1">
          extracting source code <span class="fa fa-spinner fa-spin" style="margin-left: 0.5em;"></span>
        </span>
          <span (click)="showResultArea(containerCol.imageName, 'vulnerable')" *ngIf="containerCol.vulnComponents.length !== 0">
          Vulnerable components <span [ngClass]="containerCol.resultDisplayed === 'vulnerable' ? 'glyphicon glyphicon-eye-close' : 'glyphicon glyphicon-eye-open'"></span>
        </span>
          <span *ngIf="vulnCompsChecked.indexOf(containerCol.imageName) !== -1">
          checking for vulnerable components <span class="fa fa-spinner fa-spin" style="margin-left: 0.5em;"></span>
        </span>
          <span (click)="showResultArea(containerCol.imageName, 'tests')" *ngIf="containerCol.testResults.length !== 0" style="margin-left: 1em;">
          Test results <span [ngClass]="containerCol.resultDisplayed === 'tests' ? 'glyphicon glyphicon-eye-close' : 'glyphicon glyphicon-eye-open'"></span>
        </span>
          <span *ngIf="testsRun.indexOf(containerCol.imageName) !== -1">
          executing tests <span class="fa fa-spinner fa-spin" style="margin-left: 1em;"></span>
        </span>
          <span (click)="showResultArea(containerCol.imageName, 'os')" *ngIf="containerCol.osDetails.length !== 0" style="margin-left: 1em;">
          OS details <span [ngClass]="containerCol.resultDisplayed === 'os' ? 'glyphicon glyphicon-eye-close' : 'glyphicon glyphicon-eye-open'"></span>
        </span>
          <span *ngIf="osChecked.indexOf(containerCol.imageName) !== -1">
          checking OS details <span class="fa fa-spinner fa-spin" style="margin-left: 0.5em;"></span>
        </span>
        </div>
        <div class="col-md-3" *ngIf="hoveredImageNameDiv.indexOf(containerCol.imageName) !== -1">
          <a class="btn btn-inverse btn-sm" (click)="checkVulnComp(containerCol.imageName)" title="check vulnerable components"
             *ngIf="vulnCompsChecked.indexOf(containerCol.imageName) === -1 && containerCol.vulnComponents.length === 0">
            <span class="fa fa-exclamation-triangle"></span>
          </a>
          <a class="btn btn-inverse btn-sm" style="margin-left: 1em;" title="get installed packages">
            <span class="fa fa-list"></span>
          </a>
          <a class="btn btn-inverse btn-sm" (click)="runTests(containerCol.imageName)" style="margin-left: 1em;" title="run tests"
             *ngIf="testsRun.indexOf(containerCol.imageName) === -1 && containerCol.testResults.length === 0">
            <span class="fa fa-check"></span>
          </a>
          <a class="btn btn-inverse btn-sm" (click)="checkOS(containerCol.imageName)" style="margin-left: 1em;" title="check OS"
             *ngIf="osChecked.indexOf(containerCol.imageName) === -1 && containerCol.osDetails.length === 0">
            <span class="fa fa-cogs"></span>
          </a>
        </div>
      </div>
      <div class="row" *ngIf="visibleResponseAreas.indexOf(containerCol.imageName) !== -1">
        <div class="col-md-3"></div>
        <div class="col-md-6" style="height: auto;">
          <div *ngIf="containerCol.resultDisplayed === 'vulnerable'">
            <h4>Vulnerable components:</h4>
            <p *ngFor="let vulnerability of containerCol.vulnComponents">
              {{vulnerability}}
            </p>
            <h4>Updates:</h4>
            <p *ngFor="let update of containerCol.updates">
              {{update}}
            </p>
          </div>
          <div *ngIf="containerCol.resultDisplayed === 'packages'" >

          </div>
          <div *ngIf="containerCol.resultDisplayed === 'tests'" >
            <h4>Test results:</h4>
            <p *ngFor="let test of containerCol.testResults">
              {{test}}
            </p>
          </div>
          <div *ngIf="containerCol.resultDisplayed === 'os'" >
            <h4>OS details:</h4>
            <p>
              {{containerCol.osDetails}}
            </p>
          </div>
        </div>
        <div class="col-md-3"></div>
      </div>
      <div *ngFor="let container of containerCol.containers">
        <div class="row" style="margin-bottom: 0.5em; margin-top: 0.5em;"
             (mouseenter)="mouseEnterContainerDiv(container.id)" (mouseleave)="mouseLeaveContainerDiv(container.id)">
          <div class="col-md-4">
          </div>
          <div class="col-md-2" style="padding-bottom: 0.5em; padding-top: 0.5em;">{{container.name}}</div>
          <div class="col-md-1">{{container.id | slice:0:12}}</div>
          <div class="col-md-2">{{container.status}}</div>
          <div class="col-md-3" *ngIf="hoveredContainerDiv.indexOf(container.id) !== -1">
            <a [ngClass]="container.state === 'running' ? 'noEvents transparent btn btn-inverse btn-sm' : 'btn btn-inverse btn-sm'"
               (click)="startContainer(container.id)" title="start container">
              <span class="glyphicon glyphicon-play"></span>
            </a>
            <a [ngClass]="container.state !== 'running' ? 'noEvents transparent btn btn-inverse btn-sm' : 'btn btn-inverse btn-sm'"
               (click)="stopContainer(container.id)" style="margin-left: 1em;" title="stop container">
              <span class="glyphicon glyphicon-stop"></span>
            </a>
            <a [ngClass]="container.state === 'running' ? 'noEvents transparent btn btn-danger btn-sm' : 'btn btn-danger btn-sm'"
               (click)="removeContainer(container.id)" style="margin-left: 1em;" title="remove container">
              <span class="glyphicon glyphicon-remove"></span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
